#:set screens ['Time Settings', 'Sequence', 'Timer', 'Imagery']
#:set btnpressed_img 'images/3_rating_good.png'


GridLayout:
    rows: 2
    cols: 1
    # -------------------------------------------Action Bar
    ActionBar:
        id: action_bar
        pos_hint: {'top':1}
        ActionView:
            use_separator: True
            ActionPrevious:
                #app_icon: 'images/ic_launcher3.png'
                title: 'Mentor'
                with_previous: False
            ActionButton:
                text: screens[page_layout.index]
            ActionGroup:
                mode: 'spinner'
                text: 'pages'
                ActionButton:
                    text: screens[0]
                    on_press: page_layout.index = 0
                ActionButton:
                    text: screens[1]
                    on_press: page_layout.index = 1
                ActionButton:
                    text: screens[2]
                    on_press: page_layout.index = 2
                ActionButton:
                    text: screens[3]
                    on_press: page_layout.index = 3
    Carousel:
        id: page_layout
        direction: 'right'
        #current_slide: 1
        loop: True
        index: 1
    # ------------------------------------ sequence_selector
        GridLayout:
            id: grid_sequences
            rows: 2
            padding: [10.0,10.0,10.0,10.0]
            GridLayout:
                id: grid_main
                cols:2
                spacing: 10.0
                padding: [0.0,10.0,0.0,10.0]
                #spacing: 2
                #row_force_default: 50
            Button:
                size_hint_y: .1
                text: "start"
                on_press:
                    page_layout.page = 2
                    app.osc_send()
            #spacing: 2
            #row_force_default: 50
    # ------------------------------------------------ HOME
        FloatLayout:
            id: 'home'
            Label:
                size_hint: 1.0, .1
                pos_hint: {'x': .0, 'y': .9}
                font_size: '30dp'
                text: 'Settings'
            TextInput:
                id: minutes
                text: '30'
                font_size: '80dp'
                background_color: (0,0,0,1)
                foreground_color: (1.0,1.0,1.0,1.0)
                font_color: (0,0,0,0)
                input_filter: 'int'
                pos_hint: {'x': .2, 'y': .7}
                size_hint: .3, .2
            Label:
                size_hint: .1, .1
                pos_hint: {'x': .45, 'y': .8}
                font_size: '30dp'
                text: '\''
            TextInput:
                id: seconds
                text: '00'
                font_size: '80dp'
                background_color: (0,0,0,1)
                foreground_color: (1.0,1.0,1.0,1.0)
                font_color: (0,0,0,0)
                input_filter: 'int'
                pos_hint: {'x': .6, 'y': .7}
                size_hint: .3, .2
            Label:
                size_hint: .1, .1
                pos_hint: {'x': .85, 'y': .8}
                font_size: '30dp'
                text: '\'\''
            TextInput:
                id: exercises
                text: '05'
                font_size: '80dp'
                background_color: (0,0,0,1)
                foreground_color: (1.0,1.0,1.0,1.0)
                font_color: (0,0,0,0)
                input_filter: 'int'
                pos_hint: {'x': .2, 'y': .5}
                size_hint: .3, .2
            Label:
                size_hint: .1, .1
                pos_hint: {'x': .3, 'y': .45}
                font_size: '30sp'
                text: 'ex.'
            TextInput:
                id: repetitions
                text: '01'
                font_size: '80sp'
                background_color: (0,0,0,1)
                foreground_color: (1.0,1.0,1.0,1.0)
                font_color: (0,0,0,0)
                input_filter: 'int'
                pos_hint: {'x': .6, 'y': .5}
                size_hint: .3, .2
            Label:
                size_hint: .1, .1
                pos_hint: {'x': .6, 'y': .45}
                font_size: '30dp'
                text: 'reps'
            Label:
                size_hint: 1.0, .1
                pos_hint: {'x': .0, 'y': .9}
                font_size: '30dp'
                text: 'Settings'
            Spinner:
                id: 'type'
                text: "AMRAP"
                values: 'AMRAP', 'RFT (w CAP Time)', 'EMOM'
                pos_hint: {'x': .1, 'y': .0}
                size_hint: .3, .2
            Button:
                id: start
                text: "Start\nSequence"
                group: 'Commands'
                font_size: '40dp'
                background_color: (0.1,0.1,0.1,1)
                #foreground_color: (1.0,1.0,1.0,1.0)
                pos_hint: {'x': .5, 'y': .0}
                size_hint: .4, .2
                on_press:
                    page_layout.index = 2
                    app.osc_send("{}.{}.{}.{}".format(minutes.text, seconds.text, exercises.text, repetitions.text), "/tmr")
        # ------------------------------------------- TIMER
        FloatLayout:
            id: home
            Label:
                id: current_title
                size_hint: 1.0, .1
                pos_hint: {'x': .0, 'y': .9}
                font_size: '30dp'
                text: "----"
            Label:
                id: current_minute
                text: "'"
                font_size: '80dp'
                background_color: (0,0,0,1)
                foreground_color: (1.0,1.0,1.0,1.0)
                font_color: (0,0,0,0)
                pos_hint: {'x': .2, 'y': .7}
                size_hint: .3, .2
            Label:
                id: current_second
                text: "''"
                font_size: '80dp'
                background_color: (0,0,0,1)
                foreground_color: (1.0,1.0,1.0,1.0)
                font_color: (0,0,0,0)
                pos_hint: {'x': .6, 'y': .7}
                size_hint: .3, .2
            Label:
                id: current_exercise
                text: '0'
                font_size: '80dp'
                background_color: (0,0,0,1)
                foreground_color: (1.0,1.0,1.0,1.0)
                font_color: (0,0,0,0)
            Label:
                size_hint: .1, .1
                pos_hint: {'x': .3, 'y': .45}
                font_size: '30sp'
                text: 'ex.'
            Label:
                id: current_repetition
                text: '0'
                font_size: '80sp'
                background_color: (0,0,0,1)
                foreground_color: (1.0,1.0,1.0,1.0)
                font_color: (0,0,0,0)
                pos_hint: {'x': .6, 'y': .5}
                size_hint: .3, .2
            Label:
                size_hint: .1, .1
                pos_hint: {'x': .6, 'y': .45}
                font_size: '30dp'
                text: 'reps'
            Button:
                text: "Start"
                group: 'Commands'
                font_size: '40dp'
                background_color: (0.1,0.1,0.1,1)
                #foreground_color: (1.0,1.0,1.0,1.0)
                pos_hint: {'x': .05, 'y': .0}
                size_hint: .3, .2
                on_press: app.osc_send('start', '/cmd')
            Button:
                text: "Pause"
                group: 'Commands'
                font_size: '40dp'
                background_color: (0.1,0.1,0.1,1)
                #foreground_color: (1.0,1.0,1.0,1.0)
                pos_hint: {'x': .35, 'y': .0}
                size_hint: .3, .2
                on_press: app.osc_send('pause', '/cmd')
            Button:
                text: "Stop"
                group: 'Commands'
                font_size: '40dp'
                background_color: (0.1,0.1,0.1,1)
                #foreground_color: (1.0,1.0,1.0,1.0)
                pos_hint: {'x': .65, 'y': .0}
                size_hint: .3, .2
                on_press: app.osc_send('stop', '/cmd')
        # ------------------------------------------ PHOTOS
        GridLayout:
            id: photos
            rows: 4
            cols: 1
            GridLayout:
                rows: 1
                cols: 1
                size_hint_y: 5
                Image:
                #AsyncImage:
                    id: img_bk
                    source: "images/bk_nw.png"
            GridLayout:
                rows: 1
                cols: 1
                size_hint_y: 2
                Label:
                    #size_hint_x: 4
                    id: log
                    text: 'Mentor Text'
            GridLayout:
                rows:1
                cols:8
                Label:
                    size_hint_x: 1
                Button:
                    background_normal: 'images/9_av_rewind.png'
                    background_down: btnpressed_img
                    border: (0,0,0,0)
                    on_press: app.osc_send('rewind', '/cmd')
                Button:
                    background_normal: 'images/9_av_play.png'
                    background_down: btnpressed_img
                    border: (0,0,0,0)
                    on_press: app.osc_send('play', '/cmd')
                Button:
                    background_normal: 'images/9_av_pause.png'
                    background_down: btnpressed_img
                    border: (0,0,0,0)
                    on_press: app.osc_send('pause', '/cmd')
                Button:
                    background_normal: 'images/9_av_stop.png'
                    background_down: btnpressed_img
                    border: (0,0,0,0)
                    on_press: app.osc_send('stop', '/cmd')
                Button:
                    background_normal: 'images/9_av_fast_forward.png'
                    background_down: btnpressed_img
                    border: (0,0,0,0)
                    on_press: app.osc_send('forward', '/cmd')
                Label:
                    size_hint_x: 2
                Button:
                    id: btnMusic
                    background_normal: 'images/12_hardware_headphones.png'
                    background_down: btnpressed_img
                    on_press:
            GridLayout:
                rows:1
                cols:4
                Label:
                    text: 'Left'
                Label:
                    id: partial_left
                    text: '00.00'
                Label:
                    text: 'Tot Left'
                Label:
                    id: total_left
                    text: '00.00'